<html><head><title>EKBAgent</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018002 at Thu Nov  1 20:23:41 2018 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="NAME"
>NAME</a></h1>

<p>EKBAgent</p>

<h2><a class='u'
name="SYNOPSIS"
>SYNOPSIS</a></h2>

<p>Description:</p>

<pre>    A TRIPS Agent for handling Extraction Knowledge Bases (EKBs).</pre>

<p>Arguments:</p>

<pre>    -store &#60;path&#62;

    Path to folder where EKBs are stored.

    -testFile &#60;testFileName&#62;

    All assertions contained in the file, testFileName, are sent to the
    system using the :IMITATE-KEYBOARD-MANAGER request message.  This
    will result an :INTERPRET-SPEECH-ACT Tell message which contains AKRL.
    The AKRL is converted to EKB. Then the assertion is sent to the drum
    web parser to generate drum EKB. Finally EKB::Compare is called on to
    compare the two version of EKB.  The resulting summary is displayed
    on the console.

    -compareEnabled

    When this parameter is specified, the EKBAgent continues to process
    :INTERPRET-SPEECH-ACT Tell messages even after processing any test
    file assertions.  If it is not specified then only test file assertions
    are processed.

    -saveResultsFolder &#60;folder&#62;

    If specified then any EKB comparisons will be saved in the specified
    folder.  If not specified then they are stored in &#39;./ekb-agent-tests&#39;.
    Separate files for Drum EKB, Bob EKB, AKRL, and DIFF are created
    using the assertion as the filename prefix followed by &#34;-drum.ekb&#34;,
    &#34;-bob.ekb&#34;, &#34;.akrl&#34;, and &#34;-DIFF.txt&#34; respectively.</pre>

<p>Usage:</p>

<pre>    EKBAgent can be run in multiple ways based on the arguments passed in.
    In all cases the EKBAgent handles the messages described in the
    &#39;Messaging&#39; section.

    Examples:

          perl EKBAgent.pl

        This is the default way to run the agent.  No assertions will be
        compared.

          perl EKBAgent.pl -testFile AKRL/drumBobTestsAll.txt

        This will compare all assertions in the specified file and display the
        results O the console. Results are stored in &#39;./ekb-agent-tests&#39;.

          perl EKBAgent.pl -testFile AKRL/drumBobTestsAll.txt -saveResultsFolder ARKL/results

        This will compare all assertions in the specified file and display the
        results on the console and save the EKB, AKRL, and results in the
        specified foler.

          perl EKBAgent.pl -compareEnabled -saveResultsFolder ARKL/results

        This will compare all assertions entered into the BOB chat dialog and
        display the results on the console and save the EKB, AKRL, and results
        in the specified foler.

          perl EKBAgent.pl -compareEnabled -testFile AKRL/drumBobTestsAll.txt -saveResultsFolder ARKL/results

        This will compare all assertions in the specified file and entered
        into the BOB chat dialog. The results will also be displayed on the
        console and the EKB, AKRL, and results will be saved in the specified
        foler.</pre>

<p>Messaging:</p>

<pre>    1. EKB inference

        on receiving:

         (REQUEST
          :content (do-ekb-inference :ekb &#34;EKB_PATH&#34; [:return-string B])
          :reply-with R1)

        runs inference on the EKB read from file with path EKB_PATH, saves
        result to a new file, and, if all is well, sends:

         (REPLY :in-reply-to R1
           :content (done :result &#34;EKB&#34;))

        where:
         - EKB is:
           - the KQML-stringified EKB when B is TRUE
           - the name of the file containing the inferred EKB, when B is FALSE
             (or :return-string is ommitted)

    2. AKRL-to-EKB

      on receiving:

        (REQUEST
          :content (get-ekb-representation [:ids (id1 id2 ...)] :context &#34;AKRL_TEXT&#34;)
          :reply-with R1)

      runs the AKRL toEKB method to convert the specified ids in the AKRL_TEXT
      into EKB format.  If no ids are specified, then all valid AKRL terms are
      processed and returned in EKB format.  The resulting EKB is then sent as:

        (REPLY :in-reply-to R1
          :content (done :result &#34;EKB_TEXT&#34;))

      where:
        - EKB_TEXT is KQML-stringified EKB.

    3. Handling EKB persistent storage

       The agent can maintain persistent storage. The -store option must be 
       given to enable this behavior.

       Operations allowed (via REQUEST performatives):

       - get-ekb-store-contents: returns the contents of the EKB store
       - store-ekb: adds EKB to store
       - remove-ekb: removes EKB from store
       - remove-doc: removes extractions for the given document from all 
         stored EKBs (typically just one).
       - get-ekb: returns EKB for a given document from store (if it exists)
       - query-ekb: returns an EKB with parts of the EKB store (from possibly 
         multiple documents) containing extractions that match a query
       - show-ekb: displays an EKB, assuming an appropriate display is 
         available

       [TODO: flesh out messaging]</pre>

<p>Functions (incomplete):</p>

<h2><a class='u'
name="sendNextTest()"
>sendNextTest()</a></h2>

<p>If a test file was specified then read the next assertion and send it as if it was entered from the BOB chat dialog. If there are no more assertions, print out Finished. If a line is blank or starts with a &#39;#&#39; it is ignored.</p>

<h2><a class='u'
name="compareEKB(_)"
>compareEKB( )</a></h2>

<p>After receiving the Drum and Bob versions of the EKB, the text is converted to EKB objects then run through the EKB::Compare class to determine the differences</p>

<h2><a class='u'
name="getDRUM_EKB_(assertion)"
>getDRUM_EKB (assertion)</a></h2>

<p>The assertion parameter is sent to the trips on-line drum parser and the results are parsed for the embeded EKB. If all goes well the EKB is returned as a text string. If there are any issues then an error code is returned.</p>

<h2><a class='u'
name="readEKBFromFile_(filename)"
>readEKBFromFile (filename)</a></h2>

<p>Reads the EKB from a file named filename, which contains the result of the curl call to the trips drum-dev parser.</p>

<h2><a class='u'
name="writeToFile_(parentFolder,_filename,_extension,_string)"
>writeToFile (parentFolder, filename, extension, string)</a></h2>

<p>Writes the string to a file named filename in the parentFolder. If the parentFolder does not exists, it is created.</p>

<!-- end doc -->

</body></html>
